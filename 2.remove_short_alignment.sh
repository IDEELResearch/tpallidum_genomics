for sample in *.mm2.bam; do samtools view -h -@ 24 $sample | perl -slane '$l = 0; $F[5] =~ s/(\d+)[MX=DN]/$l+=$1/eg; print if $l < 35 or /^@/' -- -MIN_LENGTH_MAPPED=35 | samtools view -@ 24 -b - > ${sample}.short.filtOut.bam & samtools view -h -@ 24 $sample | perl -slane '$l = 0; $F[5] =~ s/(\d+)[MX=DN]/$l+=$1/eg; print if $l >= 35 or /^@/' -- -MIN_LENGTH_MAPPED=35 | samtools view -@ 24 -b - > ${sample}.short.bam;done
